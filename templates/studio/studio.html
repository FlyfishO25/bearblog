{% extends 'base.html' %}

{% block title %}Dashboard | Bear Blog{% endblock %}

{% block nav %}{% include '../snippets/dashboard_nav.html' %}{% endblock %}

{% block content %}

{% if not blog.upgraded or not blog.older_than_one_day %}
<p style="border: 1px dashed; text-align:center; padding: 5px">
    {% if not blog.older_than_one_day %}
        <b>Welcome to your Bear Blog dashboard</b>.
        <br>
        Check out this <a href="https://docs.bearblog.dev/quick-start/" target="_blank">short video guide</a> to get started.
        <br>
    {% endif %}
    {% if not blog.upgraded %}
    
    <i><a href="/dashboard/upgrade/">Upgrade</a> for additional features and to support the Tiny Internet!</i>
    {% endif %}
</p>
{% endif %}

<h1>Home</h1>

{% if error_message %}
<p style="color:lightsalmon">
    {{ error_message }}
</p>
{% endif %}

{% if info_message %}
<p style="color: black">
    {{ info_message | safe }}
</p>
{% endif  %}

<form method="POST" class="post-form full-width">
    <p style="line-height: 0">
        <button type="submit">Publish</button>
        {% if blog %}
        <button onclick="event.preventDefault(); window.open('{{ blog.dynamic_domain }}')">View</button>
        {% endif %}
    </p>
    <details style="font-size: 12px; margin-bottom: 10px;">
        <summary>
            Available header options
            <a href="https://docs.bearblog.dev/home-page" target="_blank" style="text-decoration:none">
                &#9432;
            </a>
        </summary>
        <pre style="">
title: Baloo's blog
bear_domain: baloo.bearblog.dev
custom_domain: baloothebear.com
favicon: üêª
meta_description: Look for the bear necessities
meta_image: https://bear-images.sfo2.cdn.digitaloceanspaces.com/herman-1683556746-0.jpeg
lang: en
custom_meta_tag: &lt;meta name='bear-id' content='baloo' /&gt;
___</pre>
    </details>
    
    {% csrf_token %}
    <textarea
        name="raw_content"
        style="width: calc(100% - 13px); height: 500px"
        rows="10"
    >{% if error_message and raw_content  %}{{ raw_content }}{% else %}
title: {{ blog.title }}
bear_domain: {{ blog.blank_bear_domain }}{% if blog.domain %}
custom_domain: {{ blog.domain }}{% endif %}
favicon: {{ blog.favicon }}{% if blog.meta_description %}
meta_description: {{ blog.meta_description }}{% endif %}{% if blog.meta_image %}
meta_image: {{ blog.meta_image }}{% endif %}{% if blog.lang != 'en' %}
lang: {{ blog.lang }}{% endif %}{% if blog.meta_tag and blog.meta_tag != "<meta name='' property='' content='' />" %}
custom_meta_tag: {{ blog.meta_tag }}{% endif %}
___

{{ blog.content }}{% endif %}</textarea>
</form>
<span class="helptext">
    Learn <a href='https://herman.bearblog.dev/markdown-cheatsheet/' target='_blank'>markdown syntax</a>
    {% if blog.upgraded %}
    | <a href="/studio/directives/" target="_blank">Directives</a>
    {% endif %}
    <span style="float:right">
        <a id='upload-image'>Insert image</a>
    </span>
</span>

{% include '../snippets/editor_functions.html' with blog=blog%}
{% endblock %}