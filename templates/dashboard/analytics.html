{% extends 'base.html' %}

{% block nav %}
{% include '../snippets/dashboard_nav.html' %}
{% endblock %}

{% block content %}
<content>
    <h1>Analytics</h1>
    {% if blog.upgraded %}
    <p>
        <small>
        <a href="?days=1">Past 24 hours</a> |
        <a href="?days=7">Past 7 days</a> |
        <a href="?days=30">Past 30 days</a> |
        <a href="?days=90">Past 3 months</a> |
        <a href="?days=180">Past 6 months</a> |
        <a href="?days=365">Past year</a> |
        <a href="?days={{ since_started }}">All time</a>
        </small>
    </p>

    <i>Viewing results for the past {{ time_threshold|timesince }}</i>
    <h3>Unique reads: {{ unique_reads.hit_count__sum }}</h3>
    <h2>Top posts</h2>
    <ul class="post-list">
    {% for post in posts %}
        <li>
            <span class="number">#{{ forloop.counter }}</span> <a href="/dashboard/analytics/{{ post.pk }}">{{ post.title }}</a>
            <small>({{ post.hit_count }} reads)</small>
        </li>
        {% empty %}
        <li>
            No posts yet
        </li>
        {% endfor %}
    </ul>

    {% else %}
    <h2>Still in development</h2>
    <p>
        Email me for beta access.
    </p>
    {% endif %}
</content>
{% endblock %}